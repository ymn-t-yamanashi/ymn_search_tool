<script>
  document.addEventListener('keydown', (event) => {
    focus = document.querySelector("textarea:focus-visible, input:focus-visible")
    if (focus != null) return 
    keyAssign(event, "g", "gemini")
    keyAssign(event, "c", "clear")

  });
  function copy(){
    let llm = document.querySelector("#llm")
    let value = llm.value

    navigator.clipboard.writeText(value)
  } 

  function readText(){
    alert("ssss")
     navigator.clipboard.readText()
      .then(text => {
        location.href="/?q=" + text 
    })
  }

  function keyAssign(event, key, id) {
    if(event.key == key) document.querySelector("#" + id).click()
  }

</script>

検索ワード <a id="clear" href="#" phx-click="clear-click" class="rounded-lg bg-violet-900 px-2 text-white mt-20">クリア(c)</a> <a id="#getclip" href="#" onclick="readText()" class="rounded-lg bg-violet-900 px-2 text-white mt-20">クリックボードから取得</a>
<form phx-change="change" phx-submit="submit">
  <input id="q" type="text" name="q" value={@q} />
</form>
<br />
<%= for link <- @links do %>
  <a class="rounded-lg bg-violet-600 w-12 px-2 text-white mt-20" href={link.url} target="_blank" noopener noreferrer>
    <%= link.text %>で検索
  </a>
  <br />
<% end %>
<br />
<br /> LLM用プロンプト <br />
<br />
<a
  id="gemini"
  onclick="copy()"
  class="rounded-lg bg-violet-600 w-12 px-2 text-white mt-20"
  href="https://gemini.google.com/app"
  target="_blank"
  noopener noreferrer
>
  geminiを起動(g)
</a>
<br />
クリックボードにコピーされますので<br />
geminiを起動後手動で貼り付けてください
<br />
<br />
<textarea id="llm" style="height: 150px; width:400px" name="text"><%= @prompt %></textarea>